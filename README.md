# μ„ μ°©μ ν¬μΈνΈ μ§€κΈ‰ μ‹μ¤ν…

## ν”„λ΅μ νΈ μ‹¤ν–‰ λ°©λ²•

### μ„¤μΉ λ° μ‹¤ν–‰ λ…λ Ήμ–΄

#### 1. Redis μ‹¤ν–‰
```bash
# Dockerλ΅ Redis μ‹¤ν–‰
docker run -d -p 6379:6379 --name redis redis:latest

# λλ” λ΅μ»¬ Redis μ‹¤ν–‰
redis-server
```

#### 2. μ• ν”λ¦¬μΌ€μ΄μ… μ‹¤ν–‰
```bash
# κ¶ν• λ¶€μ—¬ (Unix/Linux/macOS)
chmod +x gradlew

# μ• ν”λ¦¬μΌ€μ΄μ… μ‹¤ν–‰
./gradlew bootRun
```

## API λ…μ„Έ

### ν¬μΈνΈ μ‹ μ²­ μ—”λ“ν¬μΈνΈ

**URL**: `POST /api/v1/point/apply`

**Request Body**:
```json
{
  "userId": 12345
}
```

**μ‘λ‹µ ν¬λ§· λ° μμ‹**:

**μ„±κ³µ μ‘λ‹µ**:
```json
{
  "success": true,
  "message": "ν¬μΈνΈ μ‹ μ²­μ΄ μ™„λ£λμ—μµλ‹λ‹¤.",
  "data": {
    "order": 1,
    "amount": 100000,
    "userId": 12345,
    "createdBy": "2024-07-08T10:30:00"
  }
}
```

**μ‹¤ν¨ μ‘λ‹µ - μ¤‘λ³µ μ‹ μ²­**:
```json
{
  "success": false,
  "message": "μ΄λ―Έ μ‹ μ²­ν• μ‚¬μ©μμ…λ‹λ‹¤.",
  "data": null
}
```

**μ‹¤ν¨ μ‘λ‹µ - λ§κ°**:
```json
{
  "success": false,
  "message": "μ‹ μ²­ λ§κ°λμ—μµλ‹λ‹¤.",
  "data": null
}
```

### ν¬μΈνΈ μ§€κΈ‰ κ·μΉ™
- 1~100λ²: 100,000μ 
- 101~2,000λ²: 50,000μ   
- 2,001~5,000λ²: 20,000μ 
- 5,001~10,000λ²: 10,000μ 
- 10,001λ… μ΄ν›„: μ§€κΈ‰ μ—†μ

## μ²λ¦¬ λ΅μ§ μ„¤λ…

### μ„ μ°©μ νλ³„ λ°©μ‹
- Redis INCR μ—°μ‚°μ„ ν™μ©ν• μ›μμ  μμ„ λ³΄μ¥
- Lua μ¤ν¬λ¦½νΈλ΅ μ¤‘λ³µ κ²€μ‚¬μ™€ μμ„ ν• λ‹Ήμ„ λ™μ‹ μ²λ¦¬

### λ™μ‹μ„±/μ¤‘λ³µ λ°©μ§€ μ²λ¦¬ λ°©μ‹
- Redis Lua μ¤ν¬λ¦½νΈλ΅ μ›μμ  μ—°μ‚° λ³΄μ¥
- Set μλ£κµ¬μ΅°λ¥Ό μ΄μ©ν• μ‚¬μ©μλ³„ μ¤‘λ³µ μ‹ μ²­ λ°©μ§€
- νΈλμ­μ…μ„ ν†µν• λ°μ΄ν„°λ² μ΄μ¤ μΌκ΄€μ„± λ³΄μ¥

## ν…μ¤νΈ

### 1. κΈ°λ³Έ ν…μ¤νΈ μ‹¤ν–‰
```bash
./gradlew test
```

### 2. 10,000λ… λ™μ‹ μ ‘μ† λ¶€ν• ν…μ¤νΈ

#### JUnit κΈ°λ° ν…μ¤νΈ
```bash
# μ„±λ¥ λ° λ™μ‹μ„± ν…μ¤νΈ μ‹¤ν–‰
./gradlew performanceTest

# λλ” κ°λ³„ ν…μ¤νΈ ν΄λμ¤ μ‹¤ν–‰
./gradlew test --tests "ConcurrencyTest"
./gradlew test --tests "PerformanceTest"
```

#### Shell μ¤ν¬λ¦½νΈ κΈ°λ° ν…μ¤νΈ
```bash
# 1. μ• ν”λ¦¬μΌ€μ΄μ… μ‹¤ν–‰
./gradlew bootRun

# 2. λ³„λ„ ν„°λ―Έλ„μ—μ„ λ¶€ν• ν…μ¤νΈ μ‹¤ν–‰
chmod +x load-test.sh
./load-test.sh
```

#### λ…λ¦½ μ‹¤ν–‰ λ¶€ν• ν…μ¤νΈ
```bash
# 1. μ• ν”λ¦¬μΌ€μ΄μ… μ‹¤ν–‰
./gradlew bootRun

# 2. λ³„λ„ ν„°λ―Έλ„μ—μ„ Kotlin λ¶€ν• ν…μ¤νΈ μ‹¤ν–‰
./gradlew run --args="LoadTest"
```

### 3. ν…μ¤νΈ μ‹λ‚λ¦¬μ¤

#### λ™μ‹μ„± ν…μ¤νΈ
- **λ©μ **: 10,000λ…μ΄ λ™μ‹μ— ν¬μΈνΈ μ‹ μ²­
- **κ²€μ¦**: μ¤‘λ³µ μ²λ¦¬ λ°©μ§€, μμ„ λ³΄μ¥, μµλ€ μ°Έκ°€μ μ μ ν•
- **μμƒ κ²°κ³Ό**: μ •ν™•ν 10,000λ…λ§ μ„±κ³µ, λ‚λ¨Έμ§€λ” λ§κ° μ²λ¦¬

#### μ„±λ¥ ν…μ¤νΈ  
- **λ©μ **: μ‘λ‹µ μ‹κ°„, μ²λ¦¬λ‰, μ•μ •μ„± μΈ΅μ •
- **λ©”νΈλ¦­**: 
  - ν‰κ·  μ‘λ‹µμ‹κ°„ < 1μ΄
  - 95% μ‘λ‹µμ‹κ°„ < 2μ΄  
  - μ²λ¦¬λ‰ > 100 req/s
  - μ„±κ³µλ¥  > 99%

#### λ‹¨κ³„λ³„ λ¶€ν• ν…μ¤νΈ
- **λ©μ **: μ μ§„μ  λ¶€ν• μ¦κ°€λ΅ μ‹μ¤ν… ν•κ³„ μΈ΅μ •
- **λ‹¨κ³„**: 100 β†’ 500 β†’ 1,000 β†’ 2,000 β†’ 5,000 β†’ 10,000λ…

### 4. ν…μ¤νΈ κ²°κ³Ό μμ‹
```
π€ μ„±λ¥ ν…μ¤νΈ κ²°κ³Ό
============================================================
π“ κΈ°λ³Έ ν†µκ³„:
  μ΄ μ”μ²­ μ: 10000
  μ„±κ³µ μ: 10000
  μ‹¤ν¨ μ: 0
  μ„±κ³µλ¥ : 100.00%

β±οΈ  μ‹κ°„ ν†µκ³„:
  μ΄ μ²λ¦¬ μ‹κ°„: 15423ms
  μ²λ¦¬λ‰: 648.74 req/s

π“ μ‘λ‹µμ‹κ°„ ν†µκ³„ (ms):
  ν‰κ· : 245ms
  μµμ†: 45ms
  μµλ€: 1205ms
  50th percentile (median): 198ms
  95th percentile: 567ms
  99th percentile: 823ms
  ν‘μ¤€νΈμ°¨: 124.56ms

β… μ„±λ¥ κΈ°μ¤€ κ²€μ¦:
  ν‰κ·  μ‘λ‹µμ‹κ°„ < 1μ΄: β… PASS (245ms)
  95% μ‘λ‹µμ‹κ°„ < 2μ΄: β… PASS (567ms)
  μ²λ¦¬λ‰ > 100 req/s: β… PASS (648.74 req/s)
  μ„±κ³µλ¥  > 99%: β… PASS (100.00%)

π― μ „μ²΄ κ²°κ³Ό: β… PASS
============================================================
```
